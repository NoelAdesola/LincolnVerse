{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Student\\\\Desktop\\\\Scratch\\\\LincolnVerse\\\\LincolnVerse\\\\frontend\\\\src\\\\pages\\\\Account.js\",\n  _s = $RefreshSig$();\n// src/pages/Account.js\nimport React, { useState, useEffect } from 'react';\nimport { getUserProfile, updateUserProfile, logoutUser } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Box, Typography, TextField, Button, Alert, CircularProgress, Divider } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Account = ({\n  user,\n  setUser\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState({\n    username: '',\n    email: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Fetch profile on mount\n  useEffect(() => {\n    getUserProfile().then(res => {\n      setProfile({\n        username: res.data.username || '',\n        email: res.data.email || ''\n      });\n    }).catch(() => {\n      setError('Failed to load profile.');\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProfile(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (error) setError('');\n    if (success) setSuccess('');\n  };\n  const handleSave = async e => {\n    e.preventDefault();\n    if (!profile.username.trim()) {\n      setError('Username cannot be empty.');\n      return;\n    }\n    setSaving(true);\n    setError('');\n    setSuccess('');\n    try {\n      await updateUserProfile(profile);\n      setSuccess('Profile updated successfully.');\n    } catch {\n      setError('Update failed. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleLogout = async () => {\n    try {\n      await logoutUser();\n    } catch {\n      console.warn('Logout failed, clearing client state anyway.');\n    }\n    setUser(null);\n    navigate('/login');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        py: 4,\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    sx: {\n      py: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Account Settings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"subtitle1\",\n      color: \"text.secondary\",\n      gutterBottom: true,\n      children: user ? `Signed in as ${user.username}` : 'You are not signed in.'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      sx: {\n        mb: 2\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      onSubmit: handleSave,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        margin: \"normal\",\n        fullWidth: true,\n        label: \"Username\",\n        name: \"username\",\n        value: profile.username,\n        onChange: handleChange,\n        autoComplete: \"username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        margin: \"normal\",\n        fullWidth: true,\n        label: \"Email\",\n        name: \"email\",\n        value: profile.email,\n        onChange: handleChange,\n        autoComplete: \"email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        sx: {\n          mt: 2,\n          mb: 1.5\n        },\n        disabled: saving,\n        children: saving ? 'Savingâ€¦' : 'Save Changes'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {\n      sx: {\n        my: 3\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      textAlign: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: handleLogout,\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(Account, \"XNymmTdvvhzWHwk9OvzfKOrc4fE=\", false, function () {\n  return [useNavigate];\n});\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useState","useEffect","getUserProfile","updateUserProfile","logoutUser","useNavigate","Container","Box","Typography","TextField","Button","Alert","CircularProgress","Divider","jsxDEV","_jsxDEV","Account","user","setUser","_s","navigate","profile","setProfile","username","email","loading","setLoading","saving","setSaving","error","setError","success","setSuccess","then","res","data","catch","finally","handleChange","e","name","value","target","prev","handleSave","preventDefault","trim","handleLogout","console","warn","sx","py","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","variant","gutterBottom","color","severity","mb","component","onSubmit","noValidate","margin","fullWidth","label","onChange","autoComplete","type","mt","disabled","my","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Student/Desktop/Scratch/LincolnVerse/LincolnVerse/frontend/src/pages/Account.js"],"sourcesContent":["// src/pages/Account.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { getUserProfile, updateUserProfile, logoutUser } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  CircularProgress,\r\n  Divider\r\n} from '@mui/material';\r\n\r\nconst Account = ({ user, setUser }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const [profile, setProfile] = useState({ username: '', email: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  // Fetch profile on mount\r\n  useEffect(() => {\r\n    getUserProfile()\r\n      .then(res => {\r\n        setProfile({\r\n          username: res.data.username || '',\r\n          email: res.data.email || ''\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setError('Failed to load profile.');\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setProfile(prev => ({ ...prev, [name]: value }));\r\n    if (error) setError('');\r\n    if (success) setSuccess('');\r\n  };\r\n\r\n  const handleSave = async e => {\r\n    e.preventDefault();\r\n    if (!profile.username.trim()) {\r\n      setError('Username cannot be empty.');\r\n      return;\r\n    }\r\n    setSaving(true);\r\n    setError('');\r\n    setSuccess('');\r\n    try {\r\n      await updateUserProfile(profile);\r\n      setSuccess('Profile updated successfully.');\r\n    } catch {\r\n      setError('Update failed. Please try again.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logoutUser();\r\n    } catch {\r\n      console.warn('Logout failed, clearing client state anyway.');\r\n    }\r\n    setUser(null);\r\n    navigate('/login');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container sx={{ py: 4, textAlign: 'center' }}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" sx={{ py: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Account Settings\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\r\n        {user ? `Signed in as ${user.username}` : 'You are not signed in.'}\r\n      </Typography>\r\n\r\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n      {success && <Alert severity=\"success\" sx={{ mb: 2 }}>{success}</Alert>}\r\n\r\n      <Box component=\"form\" onSubmit={handleSave} noValidate>\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Username\"\r\n          name=\"username\"\r\n          value={profile.username}\r\n          onChange={handleChange}\r\n          autoComplete=\"username\"\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          value={profile.email}\r\n          onChange={handleChange}\r\n          autoComplete=\"email\"\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          sx={{ mt: 2, mb: 1.5 }}\r\n          disabled={saving}\r\n        >\r\n          {saving ? 'Savingâ€¦' : 'Save Changes'}\r\n        </Button>\r\n      </Box>\r\n\r\n      <Divider sx={{ my: 3 }} />\r\n\r\n      <Box textAlign=\"center\">\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={handleLogout}\r\n        >\r\n          Log Out\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}