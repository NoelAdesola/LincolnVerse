{"ast":null,"code":"// src/pages/Account.js\nimport React,{useState,useEffect}from'react';import{getUserProfile,updateUserProfile,logoutUser}from'../services/api';import{useNavigate}from'react-router-dom';import{Container,Box,Typography,TextField,Button,Alert,CircularProgress,Divider}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Account=_ref=>{let{user,setUser}=_ref;const navigate=useNavigate();const[profile,setProfile]=useState({username:'',email:''});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// Fetch profile on mount\nuseEffect(()=>{getUserProfile().then(res=>{setProfile({username:res.data.username||'',email:res.data.email||''});}).catch(()=>{setError('Failed to load profile.');}).finally(()=>{setLoading(false);});},[]);const handleChange=e=>{const{name,value}=e.target;setProfile(prev=>({...prev,[name]:value}));if(error)setError('');if(success)setSuccess('');};const handleSave=async e=>{e.preventDefault();if(!profile.username.trim()){setError('Username cannot be empty.');return;}setSaving(true);setError('');setSuccess('');try{await updateUserProfile(profile);setSuccess('Profile updated successfully.');}catch{setError('Update failed. Please try again.');}finally{setSaving(false);}};const handleLogout=async()=>{try{await logoutUser();}catch{console.warn('Logout failed, clearing client state anyway.');}setUser(null);navigate('/login');};if(loading){return/*#__PURE__*/_jsx(Container,{sx:{py:4,textAlign:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",sx:{py:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Account Settings\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:user?`Signed in as ${user.username}`:'You are not signed in.'}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:success}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSave,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,label:\"Username\",name:\"username\",value:profile.username,onChange:handleChange,autoComplete:\"username\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,label:\"Email\",name:\"email\",value:profile.email,onChange:handleChange,autoComplete:\"email\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{mt:2,mb:1.5},disabled:saving,children:saving?'Saving…':'Save Changes'})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleLogout,children:\"Log Out\"})})]});};export default Account;","map":{"version":3,"names":["React","useState","useEffect","getUserProfile","updateUserProfile","logoutUser","useNavigate","Container","Box","Typography","TextField","Button","Alert","CircularProgress","Divider","jsx","_jsx","jsxs","_jsxs","Account","_ref","user","setUser","navigate","profile","setProfile","username","email","loading","setLoading","saving","setSaving","error","setError","success","setSuccess","then","res","data","catch","finally","handleChange","e","name","value","target","prev","handleSave","preventDefault","trim","handleLogout","console","warn","sx","py","textAlign","children","maxWidth","variant","gutterBottom","color","severity","mb","component","onSubmit","noValidate","margin","fullWidth","label","onChange","autoComplete","type","mt","disabled","my","onClick"],"sources":["C:/Users/Student/Desktop/Scratch/LincolnVerse/LincolnVerse/frontend/src/pages/Account.js"],"sourcesContent":["// src/pages/Account.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { getUserProfile, updateUserProfile, logoutUser } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  CircularProgress,\r\n  Divider\r\n} from '@mui/material';\r\n\r\nconst Account = ({ user, setUser }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const [profile, setProfile] = useState({ username: '', email: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  // Fetch profile on mount\r\n  useEffect(() => {\r\n    getUserProfile()\r\n      .then(res => {\r\n        setProfile({\r\n          username: res.data.username || '',\r\n          email: res.data.email || ''\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setError('Failed to load profile.');\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setProfile(prev => ({ ...prev, [name]: value }));\r\n    if (error) setError('');\r\n    if (success) setSuccess('');\r\n  };\r\n\r\n  const handleSave = async e => {\r\n    e.preventDefault();\r\n    if (!profile.username.trim()) {\r\n      setError('Username cannot be empty.');\r\n      return;\r\n    }\r\n    setSaving(true);\r\n    setError('');\r\n    setSuccess('');\r\n    try {\r\n      await updateUserProfile(profile);\r\n      setSuccess('Profile updated successfully.');\r\n    } catch {\r\n      setError('Update failed. Please try again.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logoutUser();\r\n    } catch {\r\n      console.warn('Logout failed, clearing client state anyway.');\r\n    }\r\n    setUser(null);\r\n    navigate('/login');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container sx={{ py: 4, textAlign: 'center' }}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" sx={{ py: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Account Settings\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\r\n        {user ? `Signed in as ${user.username}` : 'You are not signed in.'}\r\n      </Typography>\r\n\r\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n      {success && <Alert severity=\"success\" sx={{ mb: 2 }}>{success}</Alert>}\r\n\r\n      <Box component=\"form\" onSubmit={handleSave} noValidate>\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Username\"\r\n          name=\"username\"\r\n          value={profile.username}\r\n          onChange={handleChange}\r\n          autoComplete=\"username\"\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          value={profile.email}\r\n          onChange={handleChange}\r\n          autoComplete=\"email\"\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          sx={{ mt: 2, mb: 1.5 }}\r\n          disabled={saving}\r\n        >\r\n          {saving ? 'Saving…' : 'Save Changes'}\r\n        </Button>\r\n      </Box>\r\n\r\n      <Divider sx={{ my: 3 }} />\r\n\r\n      <Box textAlign=\"center\">\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={handleLogout}\r\n        >\r\n          Log Out\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}